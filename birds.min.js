function showMenuItems(){visibleMenu?(document.getElementById("deskMenuItems").style.visibility="hidden",document.getElementById("deskMenuItems").style.opacity=0):(document.getElementById("deskMenuItems").style.visibility="visible",document.getElementById("deskMenuItems").style.opacity=1),visibleMenu=!visibleMenu}function init(){camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,3e3),camera.position.z=350,scene=new THREE.Scene,scene.fog=new THREE.Fog(667235,100,1e3),renderer=new THREE.WebGLRenderer,renderer.setClearColor(scene.fog.color),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth-20,window.innerHeight),container=document.getElementById("threeCanvas"),document.body.appendChild(container),container.appendChild(renderer.domElement),initComputeRenderer(),stats=new Stats,document.addEventListener("mousemove",onDocumentMouseMove,!1),document.addEventListener("touchstart",onDocumentTouchStart,!1),document.addEventListener("touchmove",onDocumentTouchMove,!1),window.addEventListener("resize",onWindowResize,!1);var e={seperation:30,alignment:20,cohesion:90,freedom:.75},t=function(){velocityUniforms.seperationDistance.value=e.seperation,velocityUniforms.alignmentDistance.value=e.alignment,velocityUniforms.cohesionDistance.value=e.cohesion,velocityUniforms.freedomFactor.value=e.freedom};t(),initBirds();var i=new THREE.IcosahedronBufferGeometry(70,1),r=new THREE.MeshBasicMaterial({color:16729088,wireframe:!0,wireframeLinewidth:1.3}),n=new THREE.MeshBasicMaterial({color:667235});hydra[0]=new THREE.Mesh(i,r),hydra[0].position.x=0,hydra[0].position.y=15,hydra[0].position.z=100,hydra[1]=new THREE.Mesh(new THREE.IcosahedronBufferGeometry(69.5,1),n),hydra[1].position.x=0,hydra[1].position.y=15,hydra[1].position.z=100,scene.add(hydra[1]),scene.add(hydra[0])}function initComputeRenderer(){gpuCompute=new GPUComputationRenderer(WIDTH,WIDTH,renderer);var e=gpuCompute.createTexture(),t=gpuCompute.createTexture();fillPositionTexture(e),fillVelocityTexture(t),velocityVariable=gpuCompute.addVariable("textureVelocity",document.getElementById("fragmentShaderVelocity").textContent,t),positionVariable=gpuCompute.addVariable("texturePosition",document.getElementById("fragmentShaderPosition").textContent,e),gpuCompute.setVariableDependencies(velocityVariable,[positionVariable,velocityVariable]),gpuCompute.setVariableDependencies(positionVariable,[positionVariable,velocityVariable]),positionUniforms=positionVariable.material.uniforms,velocityUniforms=velocityVariable.material.uniforms,positionUniforms.time={value:0},positionUniforms.delta={value:0},velocityUniforms.time={value:1},velocityUniforms.delta={value:0},velocityUniforms.testing={value:1},velocityUniforms.seperationDistance={value:1},velocityUniforms.alignmentDistance={value:1},velocityUniforms.cohesionDistance={value:1},velocityUniforms.freedomFactor={value:1},velocityUniforms.predator={value:new THREE.Vector3},velocityVariable.material.defines.BOUNDS=BOUNDS.toFixed(2),velocityVariable.wrapS=THREE.RepeatWrapping,velocityVariable.wrapT=THREE.RepeatWrapping,positionVariable.wrapS=THREE.RepeatWrapping,positionVariable.wrapT=THREE.RepeatWrapping;var i=gpuCompute.init();null!==i&&console.error(i)}function initBirds(){var e=new THREE.BirdGeometry;birdUniforms={color:{value:new THREE.Color(16777215)},texturePosition:{value:null},textureVelocity:{value:null},time:{value:1},delta:{value:0}};var t=new THREE.ShaderMaterial({uniforms:birdUniforms,vertexShader:document.getElementById("birdVS").textContent,fragmentShader:document.getElementById("birdFS").textContent,side:THREE.DoubleSide});birdMesh=new THREE.Mesh(e,t),birdMesh.rotation.y=Math.PI/2,birdMesh.matrixAutoUpdate=!1,birdMesh.updateMatrix(),scene.add(birdMesh)}function fillPositionTexture(e){for(var t=e.image.data,i=0,r=t.length;r>i;i+=4){var n=Math.random()*BOUNDS-BOUNDS_HALF,a=Math.random()*BOUNDS-BOUNDS_HALF,o=Math.random()*BOUNDS-BOUNDS_HALF;t[i+0]=n,t[i+1]=a,t[i+2]=o,t[i+3]=1}}function fillVelocityTexture(e){for(var t=e.image.data,i=0,r=t.length;r>i;i+=4){var n=Math.random()-.5,a=Math.random()-.5,o=Math.random()-.5;t[i+0]=10*n,t[i+1]=10*a,t[i+2]=10*o,t[i+3]=1}}function onWindowResize(){windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function onDocumentMouseMove(e){mouseX=e.clientX-windowHalfX,mouseY=e.clientY-windowHalfY}function onDocumentTouchStart(e){1===e.touches.length&&(e.preventDefault(),mouseX=e.touches[0].pageX-windowHalfX,mouseY=e.touches[0].pageY-windowHalfY)}function onDocumentTouchMove(e){1===e.touches.length&&(e.preventDefault(),mouseX=e.touches[0].pageX-windowHalfX,mouseY=e.touches[0].pageY-windowHalfY)}function animate(){requestAnimationFrame(animate),render()}function render(){var e=performance.now(),t=(e-last)/1e3;t>1&&(t=1),last=e,positionUniforms.time.value=e,positionUniforms.delta.value=t,velocityUniforms.time.value=e,velocityUniforms.delta.value=t,birdUniforms.time.value=e,birdUniforms.delta.value=t,velocityUniforms.predator.value.set(.5*mouseX/windowHalfX,-.5*mouseY/windowHalfY,0),mouseX=1e4,mouseY=1e4,hydra[1].rotation.y+=.00251,hydra[1].rotation.z+=.00251,hydra[0].rotation.y+=.00251,hydra[0].rotation.z+=.00251,gpuCompute.compute(),birdUniforms.texturePosition.value=gpuCompute.getCurrentRenderTarget(positionVariable).texture,birdUniforms.textureVelocity.value=gpuCompute.getCurrentRenderTarget(velocityVariable).texture,renderer.render(scene,camera)}function initMobile(){camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,3e3),camera.position.z=350,scene=new THREE.Scene,scene.fog=new THREE.Fog(667235,100,1e3),renderer=new THREE.WebGLRenderer,renderer.setClearColor(scene.fog.color),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth-20,window.innerHeight),container=document.getElementById("threeCanvas"),document.body.appendChild(container),container.appendChild(renderer.domElement);var e=new THREE.IcosahedronBufferGeometry(70,1),t=new THREE.MeshBasicMaterial({color:16729088,wireframe:!0,wireframeLinewidth:1.5}),i=new THREE.MeshBasicMaterial({color:667235});hydra[0]=new THREE.Mesh(e,t),hydra[0].position.x=0,hydra[0].position.y=30,hydra[0].position.z=100,hydra[1]=new THREE.Mesh(new THREE.IcosahedronBufferGeometry(69.5,1),i),hydra[1].position.x=0,hydra[1].position.y=30,hydra[1].position.z=100,scene.add(hydra[1]),scene.add(hydra[0])}function animateMobile(){requestAnimationFrame(animateMobile),renderMobile()}function renderMobile(){hydra[1].rotation.y+=.00251,hydra[1].rotation.z+=.00251,hydra[0].rotation.y+=.00251,hydra[0].rotation.z+=.00251,renderer.render(scene,camera)}Detector.webgl||Detector.addGetWebGLMessage();var WIDTH=32,BIRDS=WIDTH*WIDTH;THREE.BirdGeometry=function(){function d(){for(var e=0;e<arguments.length;e++)i.array[o++]=arguments[e]}var e=3*BIRDS,t=3*e;THREE.BufferGeometry.call(this);var i=new THREE.BufferAttribute(new Float32Array(3*t),3),r=new THREE.BufferAttribute(new Float32Array(3*t),3),n=new THREE.BufferAttribute(new Float32Array(2*t),2),a=new THREE.BufferAttribute(new Float32Array(t),1);this.addAttribute("position",i),this.addAttribute("birdColor",r),this.addAttribute("reference",n),this.addAttribute("birdVertex",a);for(var o=0,s=20,l=0;BIRDS>l;l++)d(0,-0,-20,0,4,-20,0,0,30),d(0,0,-15,-s,0,0,0,0,15),d(0,0,15,s,0,0,0,0,-15);for(var o=0;3*e>o;o++){var u=~~(o/3),c=u%WIDTH/WIDTH,m=~~(u/WIDTH)/WIDTH,v=new THREE.Color(4473924+~~(o/9)/BIRDS*6710886);r.array[3*o+0]=v.r,r.array[3*o+1]=v.g,r.array[3*o+2]=v.b,n.array[2*o]=c,n.array[2*o+1]=m,a.array[o]=o%9}this.scale(.2,.2,.2)},THREE.BirdGeometry.prototype=Object.create(THREE.BufferGeometry.prototype);var container,stats,camera,scene,renderer,geometry,i,h,color,hydra=[],mouseX=0,mouseY=0,windowHalfX=window.innerWidth/2,windowHalfY=window.innerHeight/2,BOUNDS=800,BOUNDS_HALF=BOUNDS/2,last=performance.now(),gpuCompute,velocityVariable,positionVariable,positionUniforms,velocityUniforms,birdUniforms;navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)?(document.getElementById("myMenuDiv").innerHTML='<ul id="mobileMenu"><li><a data-scroll href="#about">About</a></li><li><a data-scroll href="#services">Services</a></li><li><a data-scroll href="#work">Work</a></li><li><a data-scroll href="#contact">Contact</a></li></ul>',document.getElementById("myMenuDiv").style.visibility="hidden",document.getElementById("downlink").style.visibility="hidden",document.getElementById("afterBirds").style.top="65vh",$(function(){$("#mobileMenu").slicknav({label:" "})}),initMobile(),animateMobile()):(document.getElementById("myMenuDiv").innerHTML=' <div id="deskMenu"><a onclick="showMenuItems()"> <img src="img/menu-32.png" height="32" width="auto"/> </a> <div id="deskMenuItems" > <a data-scroll href="#about">About </a>  <a data-scroll href="#services">Services </a> <a data-scroll href="#work">Work </a> <a data-scroll href="#contact"> Contact </a>  </div></div>',smoothScroll.init({speed:1e3,easing:"easeOutCubic",offset:0}),init(),animate());var visibleMenu=!1;
